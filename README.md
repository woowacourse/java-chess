# java-chess

체스 게임 구현을 위한 저장소

## 1단계 - 체스판 초기화

- [x] 게임 시작 안내문을 출력한다.
- [x] `end`를 입력하면 종료한다.
- [x] `start`를 입력하면 게임을 시작한다.
- [x] 플레이어 생성
    - [x] 백과 흑 플레이어를 생성한다.
- [x] 체스판 생성
    - [x] 각 열을 File, 각 행을 Rank라고 한다.
    - [x] 체스판의 좌표는 File과 Rank를 가진다.
    - [x] 체스판의 1칸은 고유한 1개 좌표를 가진다.
    - [x] 8 * 8 의 빈 체스 판을 생성한다.
- [x] 기물 생성
    - [x] 기물들을 종류별로 하나씩 생성한다.
    - [x] 기물들은 이름과 팀을 가지고 있다.
- [x] 기물 배치
    - [x] 배치 방식은 기본 체스 룰을 따른다.
    - [x] 흑의 기물들을 상단에, 백의 기물들을 하단에 배치한다.
- [x] 체스 판 출력
    - [x] 체스 판 전체를 출력한다.
    - [x] 흑의 기물들은 대문자로 표기하고, 백의 기물들은 소문자로 표기한다.
    - [x] 명령어가 입력 될 때 마다, 체스 판을 출력한다.

## 2단계 - 말 이동

- [x] `move ${현재위치} ${도착위치}` 를 입력받는다.
    - [x] 위의 형식에 맞지 않으면, 예외를 발생시킨다.
    - [x] `${도착위치}` 의 File, Rank가 유효하지 않으면, 이동할 수 없다.
- [x] `${현재위치}` 에 자신의 기물이 없으면, 예외를 발생시킨다.
- [x]  `${현재위치}` 에 있는 기물에게 `${도착위치}` 로 이동하라고 메시지를 보낸다.
- [x] 보드를 함께 전달한다.
- [x] 기물이 `${도착위치}` 에 이동할 수 있으면, 이동한다.
    - [x] 이동할 수 없으면, 이동 불가 안내문을 출력한다.
- [x] 말 이동 가능 여부 판단
    - [x] 말 이동 방식은 기본 체스 룰을 따른다.
    - [x] Rook, Bishop, Queen
        - [x] `${현재위치}` 로부터  `${도착위치}` 까지의 방향(기울기)을 구한다.
        - [x] 이동 명령의 방향이, 이동하고자 하는 기물의 이동 가능 방향들 중에 포함되어있지 않으면, 이동할 수 없다.
        - [x] 이동 명령 방향으로 이동할 수 있으면, 한 칸씩 `${도착위치}` 까지 검사한다.
        - [x] 이동 경로 중간(`${출발위치}` 다음부터 `${도착위치}` 직전까지)에 기물이 존재하면, 이동할 수 없다.
        - [x] `${도착위치}` 에 아군의 기물이 있으면, 이동할 수 없다.
        - [x] 그 외의 경우는 이동할 수 있다.
    - [x] King
        - [x] `${현재위치}` 로부터  `${도착위치}` 까지의 방향을 구한다.
        - [x] 이동 명령의 방향이, 이동하고자 하는 기물의 이동 가능 방향들 중에 포함되어있지 않으면, 이동할 수 없다.
        - [x] `${도착위치}` 에 아군 기물이 있으면, 이동할 수 없다.
        - [x] 그 외의 경우는 이동할 수 있다.
    - [x] Knight
        - [x] `${현재위치}` 로부터  `${도착위치}` 까지의 방향을 구한다.
        - [x] 이동 명령의 방향이, 이동하고자 하는 기물의 이동 가능 방향들 중에 포함되어있지 않으면, 이동할 수 없다.
        - [x] `${도착위치}` 에 아군 기물이 있으면, 이동할 수 없다.
        - [x] 그 외의 경우는 이동할 수 있다.
    - [x] Pawn
        - [x] `${현재위치}` 로부터  `${도착위치}` 까지의 방향(기울기)을 구한다.
        - [x] 이동 명령의 방향이, 이동하고자 하는 기물의 이동 가능 방향들 중에 포함되어있지 않으면, 이동할 수 없다.
            - [x] 흑 팀일 때 : LEFT_DOWN, DOWN, RIGHT_DOWN
            - [x] 백 팀일 때 : LEFT_UP, UP, RIGHT_UP
        - [x] 이동 명령 방향이 수직 방향(UP, DOWN) 일 때
            - [x] `${도착위치}` 에 기물이 있으면, 이동할 수 없다.
        - [x] 이동 명령 방향이 대각선 방향(LEFT_DOWN, RIGHT_DOWN, LEFT_UP, RIGHT_UP)일 때
            - [x] `${도착위치}` 에 적의 기물이 없으면, 이동할 수 없다.
        - [x] 그 외의 경우는 이동할 수 있다.

## 3단계 - 승패 및 점수

- [x] King이 잡힌 경우
    - [x] King이 잡히는 팀이 진다.
    - [x] 잡히는 즉시, 체스 판을 출력하고, 게임을 종료한다.
    - [x] `${승리한 팀}이 이겼습니다.` 를 출력한다.
- [x] King이 잡히지 않은 상태
    - [x] `status` 명령을 입력
        - [x] 각 팀의 현재 점수를 출력한다.
- [x] 점수 계산
    - [x] 각 기물의 점수는, King은 0점, Queen은 9점, Rook은 5점, Bishop은 3점, Knight는 2.5점 이다.
    - [x] Pawn의 기본 점수는 1점이다. 하지만 한 File(열)에 같은 팀의 Pawn이 있는 경우, 1점이 아닌 0.5점으로 계산한다.
    - [x] 각 팀의 점수를 따로 계산한다. (요구사항)
    - [x] 각 File(열)별로 점수를 계산해 합친다.
        - [x] Pawn들의 점수 합과 그 외 기물들의 점수 합을 따로 계산한 후에 합친다.
        - [x] Pawn들의 점수 합
            - [x] Pawn이 2개 이상이면, 각 Pawn의 점수를 0.5점으로 계산한다.
            - [x] 그 외에는 각 Pawn의 점수를 1점으로 계산한다.
        - [x] Pawn 외의 점수 합
            - [x] 각 기물들의 점수를 합친다.

## 4단계 - 웹 UI 적용

- [x] 메인 화면에서 기본 보드 화면을 출력한다.
- [x] 현재 턴의 팀 명을 출력한다.
- [x] 기물을 선택하면 선택 기물의 경계선이 붉게 변경된다.
    - [x] 현재 선택한 기물의 위치 좌표를 표시해준다.
- [x] 선택한 기물을 다시 재선택하면 활성화된 붉은 경계선이 삭제되고 선택 기물 현재 위치도 초기화된다.
- [x] 기물을 선택한 다음 다른 위치를 클릭하면 해당 기물이 이동된다.
    - [x] 현재 턴의 팀 명 또한 그에 따라 변경된다.
    - [x] 보드판이 새롭게 갱신된다.
    - [x] 갈 수 없는 위치라면 alert 예외를 발생시킨다.
- [x] 체크메이트로 게임이 종료되면 결과 페이지로 이동한다.
    - [x] 점수와 결과를 보여준다.
    - [x] 게임을 리스타트할 수 있다.

## 5단계 - DB 적용

- [] 히스토리 테이블을 생성한다.
    - [] 기물의 팀과 현재 위치 및 이동한 목적지 위치 칼럼을 가진다.
- [] 체스 기물이 움직일 때 마다 히스토리 테이블을 업데이트한다.
- [] 웹서버가 재시작했을 때 히스토리 테이블을 참조한다.
    - [] 이전 경기가 끝나지 않았다면 이전 히스토리만큼 보드를 변경시킨 다음 해당 보드를 보여준다.
    - [] 경기가 끝난 경우 새롭게 초기화된 체스 보드를 보여준다.
- [] todo : 방마다 게임을 진행할 수 있도록 변경한다.
